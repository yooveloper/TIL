# 23장 실행 컨텍스트

## 23.1 소스코드의 타입

전역 코드 → 전역 실행 컨텍스트

함수 코드 → 함수 실행 컨텍스트

eval 코드 → eval 실행 컨텍스트

모듈 코드 → 모듈 실행 컨텍스트

식별자와 스코프는 실행컨텍스트의 렉시컬 환경으로 관리하고, 코드 실행 순서는 

실행컨텍스트의 스택으로 관리한다.

실행컨텍스트는 스택 구조로 되어 있으며

소스코드가 평가되면 실행 컨텍스트가 생성되고 스택의 최상위에 쌓인다.

실행 컨텍스트 스택의 최상위에 존재하는 실행 컨텍스트는 언제나 현재 실핼 중인 코드의 실행 컨텍스트다.

## 렉시컬 환경

렉시컬 환경은 식별자와 식별자에 바인딩된 값, 그리고 상위 스코프에 대한 참조를 기록하는 환경

키와 값을 갖는 객체 형태의 스코프(전역,함수,블록스코프)를 생성하여 식별자를 키로 등록하고

식별자에 바인딩된 값을 관리한다. 

실행 컨텍스트는 LexicalEnvironment 컴포넌트와 VariableEnvironment 컴포넌트로 구분 된다.

생성초기에 둘은 하나의 동일한 렉시컬 환경을 참조하지만 몇가지 상황을 만나면 

VariableEnvironment 컴포넌트를 위한 새로운 렉시컬 환경을 생성하고 이때부터 내용이 달라지는 경우가 있다.

Lexical Environment 의 구성 컴포넌트

1. 환경 레코드
- 스코프에 포함된 식별자를 등록하고 등록된 식별자에 바인딩된 값을 관리하는 저장소.
1. 외부 렉시컬 환경에 대한 참조
- 외부 렉시컬 환경에 대한 참조는 상위 스코프를 가리킨다. 이때 상위 스코프란

해당 실행 컨텍스트를 생성한 소스코드를 포함하는 상위 코드의 렉시컬 환경을 말한다.